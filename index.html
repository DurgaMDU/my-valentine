<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Valentine</title>

    <!-- ✅ Tamil Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --blush: #ffd6e7;
        --peach: #ffe8d6;
        --wine: #8b1d3d;
        --soft-shadow: 0 8px 25px rgba(139, 29, 61, 0.2);
      }

      body {
        min-height: 100vh;
        font-family: "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, var(--blush), var(--peach));
        color: var(--wine);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        overflow: hidden;
      }

      .card {
        width: min(720px, 92vw);
        background: rgba(255, 255, 255, 0.9);
        border-radius: 24px;
        box-shadow: var(--soft-shadow);
        padding: 32px 24px 36px;
        text-align: center;
      }

      h1 {
        font-size: clamp(1.6rem, 2.8vw, 2.4rem);
        margin-bottom: 24px;
      }

      .buttons {
        display: flex;
        gap: 16px;
        justify-content: center;
        align-items: center;
      }

      button {
        border: none;
        padding: 14px 28px;
        font-size: 1rem;
        border-radius: 999px;
        cursor: pointer;
        box-shadow: var(--soft-shadow);
      }

      #yesBtn {
        background: linear-gradient(135deg, #ff8fab, #ffb3c6);
        color: #5a1025;
      }

      #noBtn {
        background: #fff0f5;
        color: #a02040;
        position: absolute;
        white-space: pre-line;
        text-align: center;
        line-height: 1.25;
        z-index: 2;
      }

      /* ✅ Tamil font class */
      .tamil-text {
        font-family: "Noto Sans Tamil", "Segoe UI", sans-serif;
        font-weight: 600;
      }

      /* Overlay */
      #overlay {
        position: fixed;
        inset: 0;
        background: radial-gradient(circle at top, #ffe1ea, #ffd6e7);
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding: 32px 18px;
        overflow-y: auto;
      }

      #overlay.show {
        display: flex;
      }

      .love-message {
        text-align: center;
        font-size: clamp(1.6rem, 3vw, 2.6rem);
        margin-bottom: 24px;
        line-height: 1.3;
      }

      .gallery {
        width: min(1100px, 95vw);
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-flow: dense;
        gap: 14px;
      }

      .gallery img {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 16px;
        box-shadow: var(--soft-shadow);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .gallery img:hover {
        transform: scale(1.08);
        box-shadow: 0 12px 30px rgba(139, 29, 61, 0.28);
      }

      /* Center the last image when it sits alone on the final row */
      .gallery img:last-child {
        grid-column: 2;
      }

      /* Pop crackers (top corners) */
      .cracker {
        position: fixed;
        top: 16px;
        width: 0;
        height: 0;
        z-index: 998;
        pointer-events: none;
      }

      .cracker.left {
        left: 16px;
      }

      .cracker.right {
        right: 16px;
      }

      .cracker-burst {
        position: absolute;
        font-size: 22px;
        opacity: 0;
        animation: burst 0.9s ease-out forwards;
      }

      @keyframes burst {
        0% {
          transform: translate(0, 0) scale(0.6);
          opacity: 0;
        }
        20% {
          opacity: 1;
        }
        100% {
          transform: translate(var(--tx), var(--ty)) scale(1.2);
          opacity: 0;
        }
      }


      /* Floating hearts (appear after Yes click) */
      .heart {
        position: fixed;
        bottom: -40px;
        font-size: 24px;
        color: #ff4d6d;
        animation: floatUp linear forwards;
        pointer-events: none;
        z-index: 999;
      }

      @keyframes floatUp {
        from {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        to {
          transform: translateY(-110vh) scale(1.6);
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <div class="card" id="mainCard">
      <h1 class="tamil-text">
        Hey Mr. Udhaya Raj, will you be my Valentine? ❤️
      </h1>

      <div class="buttons">
        <button id="yesBtn">Yes ❤️</button>
        <button id="noBtn" class="tamil-text">No 😢</button>
      </div>
    </div>

    <div id="overlay">
      <div class="love-message tamil-text">
        I love you Mr. Udhaya Raj ❤️<br />
        💕💕💕💕 You are my Valentine forever 💕💕💕💕
      </div>
      <div class="gallery" id="gallery"></div>
    </div>

    <audio id="loveSong" src="vaanam_paarthu_kidanthene.mp3"></audio>

    <script>
      let noIndex = 0;

      const noBtn = document.getElementById("noBtn");
      const yesBtn = document.getElementById("yesBtn");
      const overlay = document.getElementById("overlay");
      const gallery = document.getElementById("gallery");
      const loveSong = document.getElementById("loveSong");
      let popIntervalId = null;

      const noMessages = [
        { ta: "இது சரி இல்ல 😜", en: "This is not correct" },
        { ta: "ஆமா சொல்லு டா 😘", en: "Say yes" },
        { ta: "No வா? சரி இல்ல 😆", en: "No is not right" },
        { ta: "மறுபடியும் யோசி 💘", en: "Think again" },
        { ta: "எனக்கு தெரியும் yes டா 😎", en: "I know it’s yes" },
        { ta: "பாவம் டா , yes சொல்லு 😇", en: "Please say yes" },
        { ta: "திரும்ப try பண்ணு ❤️", en: "Try again dear" },
        { ta: " 😍", en: "Come on" },
        { ta: "No சொல்ல முடியாது 😁", en: "You can’t say no" },
        { ta: "பண்ணி தான் ஆகணும் 😘", en: "noway, Choose me" },
        { ta: "சரி சொல்லு டா 😜", en: "Just say yes" },
        { ta: "Yes சொல்லு, இல்லாட்டி கஷ்டம் 😢", en: "Say yes or else" },
        { ta: "கடைசி chance டா 😎", en: "Last chance" },
        { ta: "Final, இனி chance இல்லை 😆", en: "No more chances" },
        { ta: "எனக்கு தெரியும் உனக்கும் yes தான் 😇", en: "I know you’ll say yes" },
      ];

      function moveNoButton() {
        const padding = 20;
        const maxX = window.innerWidth - noBtn.offsetWidth - padding;
        const maxY = window.innerHeight - noBtn.offsetHeight - padding;

        noBtn.style.left = Math.random() * maxX + "px";
        noBtn.style.top = Math.random() * maxY + "px";

        const msg = noMessages[noIndex];
        noBtn.innerHTML = `
          <span class="tamil-text">${msg.ta}</span><br>
          <span style="font-size:0.85rem;opacity:0.8;">${msg.en}</span>
        `;

        noIndex = (noIndex + 1) % noMessages.length;
      }

      // Start floating hearts after Yes click
      function startHearts() {
        setInterval(() => {
          const heart = document.createElement("div");
          heart.className = "heart";
          heart.textContent = "❤️";
          heart.style.left = Math.random() * 100 + "vw";
          const duration = 6 + Math.random() * 4;
          heart.style.animationDuration = duration + "s";
          document.body.appendChild(heart);

          setTimeout(() => {
            heart.remove();
          }, duration * 1000);
        }, 400);
      }

      // Simple pop sound using Web Audio
      function playPopSound() {
        try {
          const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.type = "triangle";
          osc.frequency.value = 520 + Math.random() * 200;
          gain.gain.value = 0.15;
          gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.15);
          osc.connect(gain).connect(audioCtx.destination);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.16);
        } catch (_) {
          // ignore if audio context fails
        }
      }

      // Pop crackers animation at top corners
      function startCrackers() {
        if (popIntervalId) return;
        const emojis = ["🎉", "✨", "💥", "🎊", "💖"];
        const left = document.createElement("div");
        const right = document.createElement("div");
        left.className = "cracker left";
        right.className = "cracker right";
        document.body.appendChild(left);
        document.body.appendChild(right);

        popIntervalId = setInterval(() => {
          [left, right].forEach((side) => {
            for (let i = 0; i < 8; i += 1) {
              const spark = document.createElement("div");
              spark.className = "cracker-burst";
              spark.textContent = emojis[Math.floor(Math.random() * emojis.length)];
              const angle = Math.random() * Math.PI * 2;
              const distance = 30 + Math.random() * 60;
              const tx = Math.cos(angle) * distance;
              const ty = Math.sin(angle) * distance;
              spark.style.setProperty("--tx", `${tx}px`);
              spark.style.setProperty("--ty", `${ty}px`);
              side.appendChild(spark);
              setTimeout(() => spark.remove(), 900);
            }
          });
          playPopSound();
        }, 1200);
      }

      noBtn.addEventListener("mousedown", (e) => {
        e.preventDefault();
        moveNoButton();
      });

      yesBtn.addEventListener("click", () => {
        document.getElementById("mainCard").style.display = "none";
        overlay.classList.add("show");
        loveSong.play().catch(() => {});
        startHearts();
        startCrackers();

        if (!gallery.children.length) {
          const baseImages = [];
          for (let i = 1; i <= 10; i++) {
            baseImages.push(`images/img (${i}).jpg`);
          }

          // Show images only once, in ascending order 1..10
          baseImages.forEach((src) => {
            const img = document.createElement("img");
            img.src = src;
            gallery.appendChild(img);
          });
        }
      });

      window.addEventListener("load", () => {
        const rect = yesBtn.getBoundingClientRect();
        noBtn.style.left = rect.right + 16 + "px";
        noBtn.style.top = rect.top + "px";
      });
    </script>
  </body>
</html>
